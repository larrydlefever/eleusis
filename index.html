<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
    <title>Eleusis</title>
    <link rel="stylesheet" type="text/css" href="eleusis.css" />
    <link type="text/css" href="jquery-ui-1.8.19.custom.css" rel="stylesheet" />

    <!-- <script type="text/javascript" src="jquery.min.js"></script> -->
    <script type="text/javascript" src="jquery-1.7.1.min.js"></script>

    <script type="text/javascript" src="jquery-ui-1.8.19.custom.min.js"></script>

    <script type="text/javascript" src="node_modules/faye/faye-browser-min.js"></script>
    <script type="text/javascript" src="eleusis_common.js"></script>
    <script type="text/javascript" src="ruleGuessParser.js"></script>
    <script type="text/javascript" src="eleusis_client.js"></script>
    <script type="text/javascript" src="eleusis_app.js"></script>
</head>
<body style="position: relative;" bgcolor="#00AAFF">
<font face="arial">

<a href="https://github.com/larrydlefever/eleusis" target="_blank"><b>Source on GitHub</b></a>
<center>
    <font size="+1"><b>Eleusis</b> <br/> Robert Abbott's Game of Inductive Reasoning</font><br/>
    (web-app developed by Larry LeFever)<br/>

<div id="root" style="position: relative">

    <div id="topRow" style="position: relative; width: 800px; height: 100px; border: 1px solid #0000FF">

        <table width="100%" border=0>
            <tr valign="top">
                <td width="180px">
                    <div>
                        <form id="gamesListForm" onsubmit="return false">
                            <select id="gameChoices">
                                <option value="#" selected>Join Game</option>
                            </select>
                        </form>
                    </div>
                </td>
                <td width="180px">
                    <div id="claimNoPlayBtn" class="actionBtn" style="width:70px">No Play</div>
                </td>
                <td width="180px">
                    <div id="showHyposBtn" class="actionBtn" style="width:100px">Show Hypos</div>
                </td>
                <td>
                    <div id="showGuessesBtn" class="actionBtn" style="width:150px">Show Guesses</div>
                </td>
            </tr>
            <tr valign="top">
                <td>
                    <div id="startGameBtn" class="actionBtn" style="width:96px">Start Game</div>
                    <div>
                        <form id="newGameForm" onsubmit="return false">
                            &nbsp;with name: <input id="newGameName" type="text" width="100px" size="30"/>
                        </form>
                    </div>
                </td>
                <td>
                    <div id="ruleGuessBtn" class="actionBtn" style="width:98px">Guess Rule</div>
                    <div style="margin-top: 5px">
                        <b><font size="-1">Current Game:</font></b><br/>
                        <div id="currGameName" style="background-color: #EEEEEE; width: 175px; height: 20px"></div>
                    </div>
                </td>
                <td>
                    <div id="showRegectedsBtn" class="actionBtn" style="width:130px">Show Rejecteds</div>
                </td>
                <td>
                    <div id="showRuleBtn" class="actionBtn" style="width:150px">Show Mystery-Rule</div>
                    <div id="showHelpBtn" class="actionBtn" style="width:90px; margin-top: 5px">Show Help</div>
                </td>
            </tr>
        </table>

        <div id="guessRuleModal">
            <b><u>Guess the rule:</u></b><br/>
            Result:<br/>
            <div id="guessResult" style="background-color: white">(no result yet)</div>
            Mystery Rule's Description:<br/>
            <div id="guessedRuleDescr" style="background-color: white">(as yet unknown)</div>
            <form onsubmit="return false;">
                <!--
                <font size="-1">
                <br/><b>Tips for writing your Mystery-Rule Guesses:</b><br/>
                <ul>
                    <li>
                        There are only two things to deal with: 1) "card1" and 2) "card2". That is, the rule is
                        applied to each pair of consecutive cards in the sequence. So, you can think of "card2" as
                        just some card and "card1" as whichever card is right before it in the sequence. Meanwhile,
                        each card has only the following traits:
                        <ul>
                            <li>number</li>
                            <li>suit</li>
                            <li>suitColor</li>
                            <li>suitName</li>
                        </ul>
                    </li>
                    <li>
                        Rules often do some arithmetic (addition, multiplication, subtraction -- but NOT division)
                        with the two cards' numbers, and then sometimes also have something to say about the cards'
                        suits.  If arithmetic is done with those numbers, then the rule has something to say about the
                        result of the arithmetic.  The rule says one of the following things about that result; that it's:
                        <ul>
                            <li>odd</li>
                            <li>even</li>
                            <li>round-binary</li>
                            <li>prime</li>
                        </ul>
                    </li>
                    <li>
                        If there are two or more such "things said" about the cards, then you simply link them together
                        as usual in English with the word "and".  However, sometimes, instead, you want to say "or"
                        instead of "and".
                    </li>
                </ul>
                </font>
                -->
                <br/>

                <div id="ruleGuessBuilder">

                    <div id="boolDiv" style="display: none">
                        <select id="boolDivChoice">
                            <option value="and">and</option>
                            <option value="or">or</option>
                        </select>
                    </div>

                    <div id="clause_1" style="width: 560px; border: 2px solid #0000FF">
                        <span>card1's</span>
                        <select id="clause_1-card1-prop">
                            <option value="number">number</option>
                            <option value="suit">suit</option>
                            <option value="suitColor">suitColor</option>
                            <option value="suitName">suitName</option>
                        </select>

                        <!-- TODO: if arithmetic is chosen, then append to this clause: "is {select-num-trait}" -->
                        <select id="clause_1-op">
                            <option value="+">+</option>
                            <option value="-">-</option>
                            <option value="*">x</option>
                            <option value="==">=</option>
                            <option value="&lt;">&lt;</option>
                            <option value="&lt;=">&lt;=</option>
                            <option value="&gt;">&gt;</option>
                            <option value="&gt;=">&gt;=</option>
                        </select>
                        <span>card2's</span>
                        <select id="clause_1-card2-prop">
                            <option value="number">number</option>
                            <option value="suit">suit</option>
                            <option value="suitColor">suitColor</option>
                            <option value="suitName">suitName</option>
                        </select>
                        <!-- TODO: needs to be a span? -->
                        <span id="clause_1-num-trait-span" style="display: none">
                            <span> is </span>
                            <select id="clause_1-num-trait">
                                <option value="odd">odd</option>
                                <option value="even">even</option>
                                <option value="prime">prime</option>
                                <option value="round-binary">round-binary</option>
                            </select>
                        </span>
                    </div>

                    <div id="addRulePieceDiv">
                        <button id="addRulePiece">Add Rule-Piece</button>
                    </div>


                </div>

                <!--
                <div id="guessContentDiv" style="display: none;">
                    <button id="viewEngBtn">View English</button><br/>
                <b>function rule(card1, card2) {</b><br/>
                <textarea id="guessContent" disabled="disabled" rows="5" cols="67"></textarea><br/>
                <b>}</b>&nbsp;&nbsp;<button id="guessBtn">Guess</button><br/>
                </div>

                <div id="guessContentEngDiv" style="display: block;">
                    <button id="viewJSBtn">View Code</button>
                <textarea id="guessContentEng" style="width:560px;" rows="5" cols="67"></textarea><br/>
                </div>
                -->

            </form>
        </div>

        <div id="showRuleModal">
            Mystery Rule's Description:<br/>
            <div id="ruleDescription" style="background-color: white"></div>
            <form>
                <textarea id="ruleContent" rows="5" cols="67" disabled="disabled"></textarea>
            </form>
        </div>

        <div id="showGuessesModal">
            History of Rule-Guesses:<br/>
            <div id="guesses" style="overflow:auto; height:200px"></div>
        </div>

        <div id="failedSequencesModal">
            <b>Failed Sequences:</b><br/>
            (whether by individual card-plays or "no play" actions against the card-sequence in the common area)<br/>
            <div id="failedSequences" style="overflow:auto; height:200px">

            </div>
        </div>

        <div id="hyposModal">
            <b>Hypothetical Sequences</b>
            <br/><br/>
            <div id="hypoSequences" style="overflow:auto; height:200px">
                <b>Accepted by the Mystery-Rule But Rejected by a Rule-Guess</b>
                <div id="hyposAccepted" style="overflow:auto; height:200px">

                </div>
                <b>Rejected by the Mystery-Rule But Accepted by a Rule-Guess</b>
                <div id="hyposRejected" style="overflow:auto; height:200px">

                </div>
            </div>
        </div>

        <div id="helpModal">
            <center><b>Help Page</b></center><br/><br/>
            <div style="overflow:auto; height:300px">
                <b>General Description</b><br/>
                <a href="http://en.wikipedia.org/wiki/Robert_Abbott_(game_designer)" target="_blank">Robert Abbott</a> invented
                the card-game <a href="http://en.wikipedia.org/wiki/Eleusis_(card_game)" target="_blank">Eleusis</a>
                in the 1950's.  The game may be considered a game of
                <a href="http://en.wikipedia.org/wiki/Inductive_reasoning" target="_blank">inductive reasoning</a> in that the object of the
                game is to infer a rule that determines a sequence of playing-cards that develops over the course of the game as
                players play cards from their respective hands.
                <br/><br/>
                <b>Typical Game-Play Scenario</b><br/>
                <ul>
                    <li>
                        The game may be played by a single player against the dealer, or by as many as three players against the dealer.
                    </li>
                    <li>
                        A prospective player uses either the "Create Game" option or the "Join Game" option to enter a game.
                    </li>
                    <li>
                        At the beginning of a game, there is a single card in the common area and five cards dealt to the first player,
                        toward the bottom of the middle of the view.  In the middle of the view is a chat-window which also serves as
                        the place in which the game-app puts any system-generated messages.  If another player joins the game, his/her
                        cards appear on the lefthand side of the view, with his/her username at the top of that area. In any case,
                        by this time, the game-app has randomly chosen a "mystery-rule", which it is the object of the game to infer.
                    </li>
                    <li>
                        Whoever created (i.e., "started") the game has the first turn, and then players take turns in the order
                        in which they joined the game.
                    </li>
                    <li>
                        Then, in turn-order, players take any of the following actions, not necessarily in this order:
                        <ul>
                            <li>a player clicks on one of his/her cards, to play that card</li>
                            <ul>
                                <li>
                                    The game-app checks the played card against the "mystery-rule" to see if it satisfies it;
                                    If the rule is not satisfied, then the card is rejected and the corresponding two-card
                                    sequence is added to the "Failed Sequences" dialog's contents (see: "Show Rejecteds")
                                    and the player's turn is over. If the rule is satisified, then that card is automatically
                                    removed from that player's hand and added to the series of cards in the common area.
                                </li>
                            </ul>
                            <li>
                                Typically, a player needs to simply randomly play cards for a while in order to try to get a
                                sense of the mystery-rule.  After a while, the player may have an hypothesis.  Based on that
                                hypothesis, s/he may click on the "No Play" button, to which the game-app will respond with
                                the result of its attempt to play any of that player's cards that might be valid.  If a valid
                                card is found, the game-app plays it for that player; otherwise, the game-app indicates this
                                result, adds the corresponding series of two-card invalid sequences to the "Failed Sequences"
                                dialog's contents (see: "Show Rejecteds), and draws a new card for that player. That ends that
                                player's turn.
                            </li>
                            <li>
                                Eventually, the player will want to make a guess at the mystery-rule, by clicking on the "Guess Rule"
                                button.  In the "Guess Rule" dialog, the user needs to make use of the information provided therein
                                (essentially, the relevent "API Documentation" on the Card class) and type out the body of his/her
                                Rule-Guess.
                                <ul>
                                    <li>
                                        A Rule-Guess may consist of any valid JavaScript-code (for which see
                                        <a href="https://developer.mozilla.org/en/JavaScript/Guide" target="_blank">this for syntax and standard JavaScript API</a>
                                        and <a href="http://www.3site.eu/jstests/jhp/" target="_blank">this for a handy online JavaScript "playground"</a>).
                                        That code may make use of any or none of the
                                        details provided about the Card class (the card's "ordinal" value, its suit, its suit's name,
                                        and its suit's color). The ordinal-value of the two cards might be added together, multiplied
                                        together, subtracted one from the other (optionally with the absolute value then taken); then,
                                        that value (informally, the "ordinal result") may be tested for various possible characteristics,
                                        such as evenness, oddness, whether or not prime, whether or not a "round binary" number, etc.
                                        Meanwhile, the guess may take into account either or both cards' suit: either the suit generally
                                        or specifically the suit's name or its color, or both.
                                    </li>
                                    <li>
                                        Generally, a rule (whether a rule-guess or the mystery-rule) consists of a single (though possibly
                                        complex) logical assertion about any two-card sequence in a single shuffled normal 52-card deck of
                                        playing-cards.
                                        <ul>
                                            <li>
                                                <b>NOTE:</b> the mystery-rule may impose restrictions on card-sequence for which the player
                                                has, in a sense, "no empirical evidence", i.e., which the currently displayed series of cards
                                                in the common area does not manifest or demonstrate.  The player has no way to
                                                learn of such constraints except through experimentation in the form of rule-guessing.
                                            </li>
                                            <ul>
                                                <li>
                                                    If a Rule-Guess does not permit a sequence that the mystery-rule permits, the game-app
                                                    will indicate this fact with appropriate messaging and by adding to the "Hypothetical
                                                    Sequences" dialog's contents (see: "Show Hypos").  This corresponds with a scientist's
                                                    positing of a theory based upon incomplete evidence.
                                                </li>
                                            </ul>
                                        </ul>
                                    </li>
                                </ul>
                            </li>
                            <li>
                                Eventually, either a player correctly guesses the rule and thereby wins, or s/he clicks on the
                                "Show Rule" button, which shows a dialog containing the definition of the mystery-rule, at which
                                time the game is over and the "dealer" has won.
                            </li>
                        </ul>
                    </li>
                </ul>
            </div>
        </div>

    </div>
    <div id="middleRow" style="position: relative; width: 800px; height: 300px; border: 1px solid #0000FF">
        <div id="cards-player-left" style="overflow: auto; float: left; width: 1px; height: 300px;">
            <div id="player-left-uname" class="playerUname"></div>
        </div>
        <div id="common" style="overflow: auto; float: left; width: 785px; height: 300px;"></div>
        <div id="cards-player-right" style="overflow: auto; float: left; width: 1px; height: 300px;"></div>
        <div style="clear:both"></div>
    </div>
    <div id="bottomRow" style="position: relative; width: 800px; height: 300px; border: 1px solid #0000FF">
        <div id="serverMsgs" style="overflow: auto; width:800px; height: 50px; background-color: white; text-align:left"></div>
        <form id="chatForm" onsubmit="return false">
            <input id="chatMsg" size="154" style="width: 790px"/>
        </form>
        <div id="cards" style="overflow: auto; position: relative; height: 300px; border: 1px solid #0000FF"></div>
    </div>

</div>
</font>
</center>
</body>
</html>